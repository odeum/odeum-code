language: node_js
node_js:
    - stable

notifications:
    email: true
    slack: webhouseteam:82qu1PX5R5wkYNCW5x6fVlhu

before_install:
  - curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 1.2.1
  - export PATH="$HOME/.yarn/bin:$PATH"

script:
  - yarn --version
  - cd ./experiments/framework_decoupled_v3/ 
  - yarn
  - yarn build
  - cp ./build/index.html ./build/200.html
#  - cp -r /home/travis/build/odeum/odeum-codejs/experiments/3/build ../../

deploy:
  provider: surge
  project: ./experiments/framework_decoupled_v3/build/
  #domain: odeum-codejs-exp3.surge.sh
  #domain: odeum-codejs.surge.sh
  #odeum-kpt.surge.sh
  domain: odeum-kpt.surge.sh
  skip_cleanup: true
  on:
    all_branches: true
